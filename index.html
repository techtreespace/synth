<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DIY ì•„ë‚ ë¡œê·¸ ì‹ ë””ì‚¬ì´ì € íƒí—˜</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .tab-button {
            @apply px-4 py-2 font-semibold rounded-t-lg transition-colors duration-200 ease-in-out;
        }
        .tab-button.active {
            @apply bg-sky-600 text-white;
        }
        .tab-button:not(.active) {
            @apply text-sky-700 bg-sky-100 hover:bg-sky-200;
        }
        .content-section {
            @apply p-6 bg-white rounded-b-lg rounded-tr-lg shadow-lg min-h-[400px];
        }
        .interactive-box {
            @apply border-2 border-dashed border-amber-500 p-4 rounded-lg mt-4 text-center;
        }
        .component-card {
            @apply bg-stone-100 p-4 rounded-lg shadow hover:shadow-md transition-shadow;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 200px;
            max-height: 250px;
            background-color: #f0f0f0;
            border-radius: 0.5rem;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 250px;
            }
        }
        /* ì¶”ê°€ëœ CSS: í…ìŠ¤íŠ¸ ì„ íƒ ë°©ì§€ */
        .synth-button, #tactSwitchDemo, #potentiometerCanvas {
            -webkit-user-select: none; /* Safari */
            -ms-user-select: none; /* IE 10+ */
            user-select: none; /* Standard syntax */
            touch-action: manipulation; /* í„°ì¹˜ ì´ë²¤íŠ¸ ìµœì í™”: íƒ­ ì§€ì—° ì œê±° ë° í™•ëŒ€/ì¶•ì†Œ ë°©ì§€ */
        }
        /* ê±´ë°˜ ë²„íŠ¼ í¬ê¸° ê³ ì • ë° ë‚´ìš© ì¤‘ì•™ ì •ë ¬ */
        .synth-button {
            @apply w-24 h-20 flex items-center justify-center; /* ê³ ì •ëœ í¬ê¸°ì™€ ì¤‘ì•™ ì •ë ¬ */
            flex-shrink: 0; /* ê³µê°„ì´ ë¶€ì¡±í•´ë„ ì¤„ì–´ë“¤ì§€ ì•Šë„ë¡ í•¨ */
        }
    </style>
</head>
<body class="bg-amber-50 text-stone-800">

    <header class="bg-sky-700 text-white p-6 shadow-md sticky top-0 z-50">
        <div class="container mx-auto flex flex-col sm:flex-row justify-between items-center">
            <h1 class="text-3xl font-bold">DIY ì•„ë‚ ë¡œê·¸ ì‹ ë””ì‚¬ì´ì € íƒí—˜</h1>
            <nav class="mt-4 sm:mt-0">
                <button class="tab-button active" onclick="showSection('sound')">1. ì†Œë¦¬ì˜ ì„¸ê³„</button>
                <button class="tab-button" onclick="showSection('heart')">2. ì‹ ë””ì‚¬ì´ì €ì˜ ì‹¬ì¥</button>
                <button class="tab-button" onclick="showSection('hands')">3. ì‹ ë””ì‚¬ì´ì €ì˜ ì†ê³¼ ë°œ</button>
                <button class="tab-button" onclick="showSection('play')">4. ë‚˜ë§Œì˜ ì‹ ë””ì‚¬ì´ì € ì—°ì£¼!</button>
                <button class="tab-button" onclick="showSection('summary')">5. í•µì‹¬ ì •ë¦¬</button>
            </nav>
        </div>
    </header>

    <main class="container mx-auto p-4 sm:p-8">
        <div id="sound" class="content-section">
            <h2 class="text-2xl font-bold text-sky-700 mb-4">1. ì†Œë¦¬ì˜ ì„¸ê³„ ğŸŒ</h2>
            <p class="mb-4">ì´ ì„¹ì…˜ì—ì„œëŠ” ìš°ë¦¬ ì£¼ë³€ì˜ 'ì†Œë¦¬'ê°€ ë¬´ì—‡ì¸ì§€, ì–´ë–»ê²Œ ë§Œë“¤ì–´ì§€ê³  ìš°ë¦¬ê°€ ì–´ë–»ê²Œ ë“£ê²Œ ë˜ëŠ”ì§€ ê¸°ë³¸ì ì¸ ì›ë¦¬ë¥¼ íƒí—˜í•©ë‹ˆë‹¤. ì‹ ë””ì‚¬ì´ì €ë¥¼ ì´í•´í•˜ê¸° ìœ„í•œ ì²«ê±¸ìŒ, í•¨ê»˜ ì‹œì‘í•´ë³¼ê¹Œìš”?</p>
            
            <div class="grid md:grid-cols-2 gap-6">
                <div class="component-card">
                    <h3 class="text-xl font-semibold text-emerald-700 mb-2">ì†Œë¦¬ì˜ ë°œìƒ ì›ë¦¬</h3>
                    <p>ì†Œë¦¬ëŠ” ë¬¼ì²´ê°€ <strong class="text-amber-600">ì§„ë™</strong>í•´ì„œ ë§Œë“¤ì–´ì§€ëŠ” ì—ë„ˆì§€ì˜ í•œ í˜•íƒœì˜ˆìš”. ê¸°íƒ€ ì¤„ì„ íŠ•ê¸°ë©´ ì¤„ì´ ë–¨ë¦¬ì£ ? ì´ ë–¨ë¦¼(ì§„ë™)ì´ ê³µê¸°ë¥¼ í”ë“¤ì–´ ìš°ë¦¬ ê·€ì— ë‹¿ìœ¼ë©´ ì†Œë¦¬ë¡œ ì¸ì‹ëœë‹µë‹ˆë‹¤. ë§ˆì¹˜ ë¬¼ ìœ„ì— ëŒì„ ë˜ì¡Œì„ ë•Œ ë¬¼ê²°ì´ í¼ì ¸ë‚˜ê°€ëŠ” ê²ƒê³¼ ë¹„ìŠ·í•´ìš”!</p>
                </div>
                <div class="component-card">
                    <h3 class="text-xl font-semibold text-emerald-700 mb-2">ì†Œë¦¬ì˜ ë†’ë‚®ì´ (ìŒê³ )</h3>
                    <p>ì†Œë¦¬ì˜ ë†’ë‚®ì´ëŠ” ì§„ë™ì´ ì–¼ë§ˆë‚˜ <strong class="text-amber-600">ë¹ ë¥´ê²Œ</strong> ì¼ì–´ë‚˜ëŠ”ì§€ì— ë”°ë¼ ê²°ì •ë¼ìš”. ì§„ë™ì´ ë¹ ë¥´ë©´ ë†’ì€ ì†Œë¦¬(ê³ ìŒ), ëŠë¦¬ë©´ ë‚®ì€ ì†Œë¦¬(ì €ìŒ)ê°€ ë‚˜ì£ . 1ì´ˆì— ëª‡ ë²ˆ ì§„ë™í•˜ëŠ”ì§€ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ë‹¨ìœ„ë¥¼ <strong class="text-amber-600">ì£¼íŒŒìˆ˜(Hz)</strong>ë¼ê³  í•´ìš”. ì£¼íŒŒìˆ˜ê°€ ë†’ì„ìˆ˜ë¡ ë†’ì€ ì†Œë¦¬ê°€ ë‚©ë‹ˆë‹¤!</p>
                </div>
            </div>

            <div class="interactive-box mt-6">
                <h4 class="text-lg font-semibold mb-2">ì£¼íŒŒìˆ˜ ì¡°ì ˆ ì²´í—˜</h4>
                <p class="mb-2 text-sm">ì•„ë˜ ìŠ¬ë¼ì´ë”ë¥¼ ì›€ì§ì—¬ ì£¼íŒŒìˆ˜ë¥¼ ì¡°ì ˆí•´ë³´ì„¸ìš”. ì£¼íŒŒìˆ˜ì— ë”°ë¼ íŒŒí˜•ì´ ì–´ë–»ê²Œ ë³€í•˜ê³  ì†Œë¦¬ê°€ ì–´ë–»ê²Œ ë‹¬ë¼ì§€ëŠ”ì§€ ê´€ì°°í•´ë´…ì‹œë‹¤!</p>
                <input type="range" id="frequencySlider" min="1" max="20" value="5" class="w-full max-w-md mx-auto accent-amber-500">
                <p class="mt-2">í˜„ì¬ ì£¼íŒŒìˆ˜ ë‹¨ê³„: <span id="frequencyValue" class="font-bold text-sky-600">5</span></p>
                <div class="chart-container mt-4">
                    <canvas id="waveCanvas"></canvas>
                </div>
                <p id="pitchDescription" class="mt-2 font-semibold"></p>
            </div>
        </div>

        <div id="heart" class="content-section hidden">
            <h2 class="text-2xl font-bold text-sky-700 mb-4">2. ì‹ ë””ì‚¬ì´ì €ì˜ ì‹¬ì¥: 555 íƒ€ì´ë¨¸ì™€ OP-AMP â¤ï¸</h2>
            <p class="mb-4">ì‹ ë””ì‚¬ì´ì €ê°€ ì†Œë¦¬ë¥¼ ë‚´ëŠ” ë°ì—ëŠ” í•µì‹¬ì ì¸ ì—­í• ì„ í•˜ëŠ” ë¶€í’ˆë“¤ì´ ìˆì–´ìš”. ë°”ë¡œ '555 íƒ€ì´ë¨¸'ì™€ 'OP-AMP'ì¸ë°ìš”, ì´ë“¤ì´ ì–´ë–»ê²Œ ì‹ ë””ì‚¬ì´ì €ì˜ ì‹¬ì¥ì²˜ëŸ¼ ì‘ë™í•˜ëŠ”ì§€ ì•Œì•„ë´…ì‹œë‹¤!</p>
            <div class="grid md:grid-cols-2 gap-6">
                <div class="component-card">
                    <h3 class="text-xl font-semibold text-emerald-700 mb-2">555 íƒ€ì´ë¨¸: ì†Œë¦¬ì˜ ë°•ìë¥¼ ë§Œë“œëŠ” ì§€íœ˜ì</h3>
                    <p>555 íƒ€ì´ë¨¸ëŠ” ê·œì¹™ì ì¸ ì „ê¸° ì‹ í˜¸(í„ìŠ¤)ë¥¼ ë§Œë“¤ì–´ë‚´ëŠ” ë¶€í’ˆì´ì—ìš”. ìš°ë¦¬ ì‹ ë””ì‚¬ì´ì €ì—ì„œëŠ” ì´ í„ìŠ¤ì˜ ë¹ ë¥´ê¸°ë¥¼ ì¡°ì ˆí•´ì„œ ì†Œë¦¬ì˜ ë†’ë‚®ì´, ì¦‰ <strong class="text-amber-600">ì£¼íŒŒìˆ˜</strong>ë¥¼ ê²°ì •í•˜ëŠ” í•µì‹¬ ì—­í• ì„ í•´ìš”. ë§ˆì¹˜ ë¬¼í†µì— ë¬¼ì„ ì±„ì› ë‹¤ ë¹„ìš°ëŠ” ê²ƒì„ ë°˜ë³µí•˜ë©° ì¼ì •í•œ ê°„ê²©ì„ ë§Œë“¤ì–´ë‚´ëŠ” ê²ƒê³¼ ë¹„ìŠ·í•˜ë‹µë‹ˆë‹¤.</p>
                    <div id="timerAnimation" class="mt-2 h-16 bg-sky-100 rounded flex items-center justify-center text-sm text-sky-700">
                        í„ìŠ¤ ìƒì„± ì¤‘... (ë -ë -ë )
                    </div>
                </div>
                <div class="component-card">
                    <h3 class="text-xl font-semibold text-emerald-700 mb-2">OP-AMP (ì—°ì‚° ì¦í­ê¸°): ì†Œë¦¬ë¥¼ í‚¤ì›Œì£¼ëŠ” ìŠ¤í”¼ì»¤</h3>
                    <p>555 íƒ€ì´ë¨¸ê°€ ë§Œë“  ì†Œë¦¬ ì‹ í˜¸ëŠ” ì•„ì§ ë„ˆë¬´ ì‘ì•„ì„œ ì˜ ë“¤ë¦¬ì§€ ì•Šì•„ìš”. ì´ë•Œ OP-AMPê°€ ë“±ì¥í•©ë‹ˆë‹¤! OP-AMPëŠ” ì´ ì‘ì€ ì‹ í˜¸ë¥¼ <strong class="text-amber-600">ì•„ì£¼ í¬ê²Œ í‚¤ì›Œì£¼ëŠ”(ì¦í­í•˜ëŠ”)</strong> ì—­í• ì„ í•´ìš”. ë§ˆì´í¬ë¡œ ëª©ì†Œë¦¬ë¥¼ í¬ê²Œ ë§Œë“œëŠ” ê²ƒì²˜ëŸ¼ìš”. ë•ë¶„ì— ìš°ë¦¬ëŠ” ì‹ ë””ì‚¬ì´ì € ì†Œë¦¬ë¥¼ ìŠ¤í”¼ì»¤ë¡œ ë“¤ì„ ìˆ˜ ìˆê²Œ ëœë‹µë‹ˆë‹¤.</p>
                    <div id="opampAnimation" class="mt-2 h-16 bg-emerald-100 rounded flex items-center justify-center text-sm text-emerald-700">
                        ì‹ í˜¸ ì¦í­ ì¤‘... (ì†Œë¦¬ê°€ ì»¤ì§‘ë‹ˆë‹¤!)
                    </div>
                </div>
            </div>
        </div>

        <div id="hands" class="content-section hidden">
            <h2 class="text-2xl font-bold text-sky-700 mb-4">3. ì‹ ë””ì‚¬ì´ì €ì˜ ì†ê³¼ ë°œ: ì£¼ìš” ë¶€í’ˆë“¤ ğŸ–ï¸ğŸ¦¶</h2>
            <p class="mb-4">ì‹ ë””ì‚¬ì´ì €ë¥¼ ì§ì ‘ ì¡°ì‘í•˜ê³  ì†Œë¦¬ë¥¼ ë‹¤ì–‘í•˜ê²Œ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” ì—¬ëŸ¬ ë¶€í’ˆë“¤ì´ í•„ìš”í•´ìš”. ì „ê¸° íë¦„ì„ ì¡°ì ˆí•˜ëŠ” 'ì €í•­', ì†Œë¦¬ ë†’ë‚®ì´ë¥¼ ë°”ê¾¸ëŠ” 'ê°€ë³€ì €í•­', ì†Œë¦¬ë¥¼ ì¼œê³  ë„ëŠ” 'íƒíŠ¸ ìŠ¤ìœ„ì¹˜'ì— ëŒ€í•´ ì•Œì•„ë³¼ê¹Œìš”?</p>
            <div class="grid md:grid-cols-3 gap-6">
                <div class="component-card">
                    <h3 class="text-xl font-semibold text-emerald-700 mb-2">ì €í•­: ì „ê¸° íë¦„ì˜ ë¬¸ì§€ê¸°</h3>
                    <p>ì €í•­ì€ ì „ê¸° íšŒë¡œì—ì„œ ì „ë¥˜ì˜ ì–‘ì„ ì¡°ì ˆí•˜ê±°ë‚˜ ì „ì••ì„ ë‚˜ëˆ„ëŠ” ì—­í• ì„ í•´ìš”. ë§ˆì¹˜ ìˆ˜ë„ê¼­ì§€ë¡œ ë¬¼ì˜ ì–‘ì„ ì¡°ì ˆí•˜ë“¯, ì €í•­ì€ ì „ê¸° ì—ë„ˆì§€ì˜ íë¦„ì„ <strong class="text-amber-600">ì ì ˆí•˜ê²Œ ì œì–´</strong>í•©ë‹ˆë‹¤. 555 íƒ€ì´ë¨¸ì˜ ì‘ë™ ì†ë„ ì¡°ì ˆì—ë„ ê´€ì—¬í•´ìš”.</p>
                </div>
                <div class="component-card">
                    <h3 class="text-xl font-semibold text-emerald-700 mb-2">ê°€ë³€ì €í•­: ì†Œë¦¬ ë†’ë‚®ì´ ë§ˆë²•ì‚¬</h3>
                    <p>ê°€ë³€ì €í•­ì€ ì†ì¡ì´ë¥¼ ëŒë ¤ ì €í•­ê°’ì„ ë°”ê¿€ ìˆ˜ ìˆëŠ” íŠ¹ë³„í•œ ì €í•­ì´ì—ìš”. ì‹ ë””ì‚¬ì´ì €ì—ì„œëŠ” ì´ ê°€ë³€ì €í•­ì„ ëŒë ¤ 555 íƒ€ì´ë¨¸ì— ì—°ê²°ëœ ì €í•­ê°’ì„ ë³€í™”ì‹œí‚¤ê³ , ê²°ê³¼ì ìœ¼ë¡œ <strong class="text-amber-600">ì†Œë¦¬ì˜ ë†’ë‚®ì´ë¥¼ ë§ˆìŒëŒ€ë¡œ ì¡°ì ˆ</strong>í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤. ë¼ë””ì˜¤ ë³¼ë¥¨ ì¡°ì ˆê¸°ì²˜ëŸ¼ìš”!</p>
                     <div class="interactive-box mt-2">
                        <label for="potentiometerCanvas" class="block text-sm font-medium text-gray-700">ê°€ë³€ì €í•­ ì²´í—˜:</label>
                        <canvas id="potentiometerCanvas" class="w-full max-w-xs mx-auto" width="150" height="150"></canvas>
                        <p class="text-sm mt-1">ì €í•­ ê°’: <span id="potentiometerValue" class="font-bold text-sky-600">50</span>% (íƒíŠ¸ ìŠ¤ìœ„ì¹˜ë¥¼ ëˆ„ë¥¸ ìƒíƒœì—ì„œ ì¡°ì ˆ)</p>
                    </div>
                </div>
                <div class="component-card">
                    <h3 class="text-xl font-semibold text-emerald-700 mb-2">íƒíŠ¸ ìŠ¤ìœ„ì¹˜: ì†Œë¦¬ ì¬ìƒ ë²„íŠ¼</h3>
                    <p>íƒíŠ¸ ìŠ¤ìœ„ì¹˜ëŠ” ëˆ„ë¥´ë©´ íšŒë¡œê°€ ì—°ê²°ë˜ì–´ ì†Œë¦¬ê°€ ë‚˜ê³ , ì†ì„ ë–¼ë©´ íšŒë¡œê°€ ëŠì–´ì ¸ ì†Œë¦¬ê°€ ë©ˆì¶”ëŠ” <strong class="text-amber-600">ë²„íŠ¼</strong>ì´ì—ìš”. ì „ë“± ìŠ¤ìœ„ì¹˜ì²˜ëŸ¼ ì „ê¸°ì˜ ê¸¸ì„ ì—´ì—ˆë‹¤ ë‹«ì•˜ë‹¤ í•˜ë©° ì‹ ë””ì‚¬ì´ì € ì†Œë¦¬ë¥¼ ì œì–´í•©ë‹ˆë‹¤.</p>
                    <div class="interactive-box mt-2">
                        <button id="tactSwitchDemo" class="bg-sky-500 hover:bg-sky-600 text-white font-bold py-2 px-4 rounded transition-colors">
                            ìŠ¤ìœ„ì¹˜ ëˆ„ë¥´ê¸°!
                        </button>
                        <p id="tactSwitchStatus" class="text-sm mt-1">ìŠ¤ìœ„ì¹˜ ìƒíƒœ: êº¼ì§ (ë§ˆìš°ìŠ¤ í´ë¦­ ë˜ëŠ” ìŠ¤í˜ì´ìŠ¤ë°”/ì—”í„° í‚¤ë¡œ ì¡°ì‘)</p>
                    </div>
                </div>
            </div>
        </div>

        <div id="play" class="content-section hidden">
            <h2 class="text-2xl font-bold text-sky-700 mb-4">4. ë‚˜ë§Œì˜ ì‹ ë””ì‚¬ì´ì € ì—°ì£¼! ğŸ¹âœ¨</h2>
            <p class="mb-4">ì§€ê¸ˆê¹Œì§€ ë°°ìš´ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ ê°€ìƒì˜ ì‹ ë””ì‚¬ì´ì €ë¥¼ ì—°ì£¼í•´ë´…ì‹œë‹¤! ê°€ë³€ì €í•­ìœ¼ë¡œ ìŒë†’ì´ë¥¼ ì¡°ì ˆí•˜ê³ , ê±´ë°˜ì„ ëˆŒëŸ¬ ì†Œë¦¬ë¥¼ ë‚´ë³´ì„¸ìš”. ì—¬ëŸ¬ë¶„ë§Œì˜ ë…íŠ¹í•œ ì†Œë¦¬ë¥¼ ë§Œë“¤ ìˆ˜ ìˆì„ ê±°ì˜ˆìš”!</p>
            
            <div class="bg-stone-200 p-6 rounded-lg shadow-inner max-w-2xl mx-auto">
                <h3 class="text-xl font-semibold text-center text-stone-700 mb-4">ë¯¸ë‹ˆ ì‹ ë””ì‚¬ì´ì € ì‹œë®¬ë ˆì´í„°</h3>
                
                <div class="flex flex-col items-center space-y-6">
                    <div class="flex flex-wrap justify-center gap-4 mb-4">
                        <label class="inline-flex items-center">
                            <input type="radio" name="waveformType" value="sine" class="form-radio text-sky-600 accent-sky-600" checked>
                            <span class="ml-2 text-sm font-medium text-gray-700">ì‚¬ì¸íŒŒ (Sine)</span>
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" name="waveformType" value="square" class="form-radio text-sky-600 accent-sky-600">
                            <span class="ml-2 text-sm font-medium text-gray-700">ì‚¬ê°íŒŒ (Square)</span>
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" name="waveformType" value="sawtooth" class="form-radio text-sky-600 accent-sky-600">
                            <span class="ml-2 text-sm font-medium text-gray-700">í†±ë‹ˆíŒŒ (Sawtooth)</span>
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" name="waveformType" value="triangle" class="form-radio text-sky-600 accent-sky-600">
                            <span class="ml-2 text-sm font-medium text-gray-700">ì‚¼ê°íŒŒ (Triangle)</span>
                        </label>
                    </div>

                    <div>
                        <label for="synthPitchKnob" class="block text-sm font-medium text-gray-700 mb-1">ìŒë†’ì´ ì¡°ì ˆ (ê°€ë³€ì €í•­):</label>
                        <input type="range" id="synthPitchKnob" min="1" max="100" value="50" class="w-64 accent-amber-500">
                        <p class="text-xs text-center mt-1">í˜„ì¬ ê°’: <span id="synthPitchValue" class="font-bold">50</span></p>
                    </div>
                    
                    <div class="flex flex-col gap-4 w-full items-center">
                        <div class="flex flex-wrap justify-center gap-4">
                            <button class="synth-button rounded-lg shadow transition-transform hover:scale-105" data-note-full="C5">ë„</button>
                            <button class="synth-button rounded-lg shadow transition-transform hover:scale-105" data-note-full="D5">ë ˆ</button>
                            <button class="synth-button rounded-lg shadow transition-transform hover:scale-105" data-note-full="E5">ë¯¸</button>
                            <button class="synth-button rounded-lg shadow transition-transform hover:scale-105" data-note-full="F5">íŒŒ</button>
                            <button class="synth-button rounded-lg shadow transition-transform hover:scale-105" data-note-full="G5">ì†”</button>
                            <button class="synth-button rounded-lg shadow transition-transform hover:scale-105" data-note-full="A5">ë¼</button>
                            <button class="synth-button rounded-lg shadow transition-transform hover:scale-105" data-note-full="B5">ì‹œ</button>
                        </div>
                        <div class="flex flex-wrap justify-center gap-4">
                            <button class="synth-button rounded-lg shadow transition-transform hover:scale-105" data-note-full="C4">ë„</button>
                            <button class="synth-button rounded-lg shadow transition-transform hover:scale-105" data-note-full="D4">ë ˆ</button>
                            <button class="synth-button rounded-lg shadow transition-transform hover:scale-105" data-note-full="E4">ë¯¸</button>
                            <button class="synth-button rounded-lg shadow transition-transform hover:scale-105" data-note-full="F4">íŒŒ</button>
                            <button class="synth-button rounded-lg shadow transition-transform hover:scale-105" data-note-full="G4">ì†”</button>
                            <button class="synth-button rounded-lg shadow transition-transform hover:scale-105" data-note-full="A4">ë¼</button>
                            <button class="synth-button rounded-lg shadow transition-transform hover:scale-105" data-note-full="B4">ì‹œ</button>
                        </div>
                    </div>
                    
                    <div class="chart-container w-full h-48 mt-4">
                        <canvas id="synthOutputCanvas"></canvas>
                    </div>
                    <p id="synthOutputStatus" class="mt-2 text-center font-semibold text-stone-700 h-6"></p>
                </div>
            </div>
        </div>

        <div id="summary" class="content-section hidden">
            <h2 class="text-2xl font-bold text-sky-700 mb-4">5. í•µì‹¬ ì •ë¦¬ ë° í•™ìŠµ íŒ ğŸ’¡</h2>
            <p class="mb-4">ì˜¤ëŠ˜ ìš°ë¦¬ëŠ” ì†Œë¦¬ì˜ ì‹ ë¹„ë¡œìš´ ì„¸ê³„ë¶€í„° ì‹ ë””ì‚¬ì´ì €ì˜ ì‘ë™ ì›ë¦¬ê¹Œì§€ ë§ì€ ê²ƒì„ ë°°ì› ì–´ìš”. ì´ ì„¹ì…˜ì—ì„œëŠ” ì£¼ìš” ë‚´ìš©ì„ ë‹¤ì‹œ í•œë²ˆ ì •ë¦¬í•˜ê³ , ì•ìœ¼ë¡œ ë” ì¬ë¯¸ìˆê²Œ ì „ìê³µí•™ì„ íƒêµ¬í•  ìˆ˜ ìˆëŠ” ëª‡ ê°€ì§€ íŒì„ ì•Œë ¤ì¤„ê²Œìš”!</p>
            
            <div class="space-y-4">
                <div class="component-card">
                    <h3 class="text-xl font-semibold text-emerald-700 mb-2">ì˜¤ëŠ˜ ë°°ìš´ í•µì‹¬ ë‚´ìš©:</h3>
                    <ul class="list-disc list-inside space-y-1 text-sm">
                        <li>ì†Œë¦¬ëŠ” ë¬¼ì²´ì˜ <strong class="text-amber-600">ì§„ë™</strong>ìœ¼ë¡œ ë°œìƒí•˜ë©°, ì§„ë™ ì†ë„(ì£¼íŒŒìˆ˜)ì— ë”°ë¼ ë†’ë‚®ì´ê°€ ê²°ì •ë¼ìš”.</li>
                        <li><strong class="text-amber-600">555 íƒ€ì´ë¨¸</strong>ëŠ” ê·œì¹™ì ì¸ ì‹ í˜¸ë¥¼ ë§Œë“¤ì–´ ì†Œë¦¬ì˜ ê¸°ë³¸ ì£¼íŒŒìˆ˜ë¥¼ ìƒì„±í•´ìš”.</li>
                        <li><strong class="text-amber-600">OP-AMP</strong>ëŠ” ì‘ì€ ì†Œë¦¬ ì‹ í˜¸ë¥¼ í¬ê²Œ ì¦í­ì‹œì¼œ ìš°ë¦¬ê°€ ë“¤ì„ ìˆ˜ ìˆê²Œ í•´ìš”.</li>
                        <li><strong class="text-amber-600">ì €í•­</strong>ì€ ì „ë¥˜ë¥¼ ì œì–´í•˜ê³ , <strong class="text-amber-600">ê°€ë³€ì €í•­</strong>ìœ¼ë¡œ ìŒë†’ì´ë¥¼ ì¡°ì ˆí•˜ë©°, <strong class="text-amber-600">íƒíŠ¸ ìŠ¤ìœ„ì¹˜</strong>ë¡œ ì†Œë¦¬ë¥¼ ì¼œê³  ëŒ ìˆ˜ ìˆì–´ìš”.</li>
                        <li>ì´ ëª¨ë“  ë¶€í’ˆë“¤ì´ ëª¨ì—¬ ì‹ ë””ì‚¬ì´ì €ë¼ëŠ” ì•…ê¸°ê°€ ëœë‹µë‹ˆë‹¤!</li>
                    </ul>
                </div>
                 <div class="component-card">
                    <h3 class="text-xl font-semibold text-emerald-700 mb-2">í•™ìŠµ ì§„í–‰ íŒ (from êµìœ¡ê³¼ì •):</h3>
                    <ul class="list-disc list-inside space-y-1 text-sm">
                        <li><strong>ì‹œê° ìë£Œ í™œìš©:</strong> ê·¸ë¦¼ì´ë‚˜ ì• ë‹ˆë©”ì´ì…˜ì„ ë³´ë©´ ì´í•´ê°€ ë” ì‰¬ì›Œìš”. (ì´ ì•±ì²˜ëŸ¼ìš”!)</li>
                        <li><strong>ë¹„ìœ ì™€ ì‹¤ìƒí™œ ì˜ˆì‹œ:</b> ì–´ë ¤ìš´ ì›ë¦¬ë„ ì£¼ë³€ì˜ ë¬¼ê±´ì— ë¹„ìœ í•˜ë©´ ì¬ë¯¸ìˆê²Œ ë°°ìš¸ ìˆ˜ ìˆì–´ìš”.</li>
                        <li><strong>ì§ˆë¬¸ì€ ì–¸ì œë‚˜ í™˜ì˜:</strong> ê¶ê¸ˆí•œ ì ì´ ìˆë‹¤ë©´ ì£¼ì €í•˜ì§€ ë§ê³  ì§ˆë¬¸í•˜ì„¸ìš”!</li>
                        <li><strong>ì§ì ‘ ì²´í—˜í•˜ê¸°:</strong> ì§ì ‘ ë§Œì ¸ë³´ê³  ì¡°ì‘í•´ë³´ëŠ” ê²ƒì´ ìµœê³ ì˜ í•™ìŠµ ë°©ë²•ì´ì—ìš”.</li>
                        <li><strong>ì•ˆì „ ì œì¼:</strong> ì „ì ë¶€í’ˆì„ ë‹¤ë£° ë•ŒëŠ” í•­ìƒ ì•ˆì „ ìˆ˜ì¹™ì„ ì§€ì¼œì£¼ì„¸ìš”.</li>
                    </ul>
                </div>
                <p class="mt-4 text-center font-semibold">ì—¬ëŸ¬ë¶„ì˜ ì°½ì˜ë ¥ê³¼ í˜¸ê¸°ì‹¬ìœ¼ë¡œ ë” ë©‹ì§„ ì†Œë¦¬ì™€ ì¥ì¹˜ë“¤ì„ ë§Œë“¤ì–´ë³´ì„¸ìš”! ğŸš€</p>
            </div>
        </div>
    </main>

    <footer class="text-center p-4 text-sm text-sky-800 mt-8">
        COPYRIGHT TECHTREESPACE Â© 2025. ALL RIGHTS RESERVED.
    </footer>

    <script>
        const sections = ['sound', 'heart', 'hands', 'play', 'summary'];
        const tabButtons = document.querySelectorAll('.tab-button');
        const contentSections = document.querySelectorAll('.content-section');
        let currentActiveSectionId = 'sound'; // í˜„ì¬ í™œì„±í™”ëœ ì„¹ì…˜ IDë¥¼ ì¶”ì í•˜ëŠ” ë³€ìˆ˜

        function showSection(sectionId) {
            contentSections.forEach(section => {
                section.classList.add('hidden');
            });
            document.getElementById(sectionId).classList.remove('hidden');

            tabButtons.forEach(button => {
                button.classList.remove('active');
                if (button.getAttribute('onclick').includes(sectionId)) {
                    button.classList.add('active');
                }
            });
            currentActiveSectionId = sectionId; // í˜„ì¬ í™œì„±í™”ëœ ì„¹ì…˜ ì—…ë°ì´íŠ¸
            window.scrollTo(0, 0);

            // ì„¹ì…˜ì´ ë³€ê²½ë  ë•Œ ìº”ë²„ìŠ¤ í¬ê¸° ì¬ì„¤ì • ë° ì´ˆê¸°í™”
            if (sectionId === 'sound') {
                setupWaveCanvas();
            } else if (sectionId === 'play') {
                setupSynthCanvas();
            }
        }

        let audioContext;
        let oscillator;
        let gainNode;
        let currentPlayingBaseFreq = 0; // ì„¹ì…˜ 4ì—ì„œ í˜„ì¬ ì¬ìƒ ì¤‘ì¸ ìŒì˜ ê¸°ë³¸ ì£¼íŒŒìˆ˜ë¥¼ ì €ì¥

        function initAudio() {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
                gainNode = audioContext.createGain();
                gainNode.connect(audioContext.destination);
                gainNode.gain.setValueAtTime(0, audioContext.currentTime);
            }
            if (audioContext.state === 'suspended') {
                audioContext.resume();
            }
        }

        // ì„ íƒëœ íŒŒí˜• íƒ€ì…ì„ ì €ì¥í•˜ëŠ” ì „ì—­ ë³€ìˆ˜
        let selectedWaveformType = 'sine'; // ê¸°ë³¸ê°’ì€ ì‚¬ì¸íŒŒ

        function playTone(frequency, duration = 0) {
            initAudio();
            if (oscillator) {
                try {
                    oscillator.stop();
                    oscillator.disconnect();
                } catch (e) {}
            }
            oscillator = audioContext.createOscillator();
            oscillator.type = selectedWaveformType; // ì„ íƒëœ íŒŒí˜• íƒ€ì… ì ìš©
            oscillator.frequency.setValueAtTime(frequency, audioContext.currentTime);
            
            oscillator.connect(gainNode);
            gainNode.gain.linearRampToValueAtTime(0.5, audioContext.currentTime + 0.01);
            oscillator.start();

            if (duration > 0) {
                gainNode.gain.linearRampToValueAtTime(0, audioContext.currentTime + duration);
                oscillator.stop(audioContext.currentTime + duration);
            }
        }

        function stopTone() {
            if (oscillator && audioContext && audioContext.state === 'running') {
                gainNode.gain.linearRampToValueAtTime(0, audioContext.currentTime + 0.01);
                oscillator.stop(audioContext.currentTime + 0.02);
                oscillator.disconnect();
                oscillator = null;
            }
        }

        const frequencySlider = document.getElementById('frequencySlider');
        const frequencyValue = document.getElementById('frequencyValue');
        const pitchDescription = document.getElementById('pitchDescription');
        let waveCanvas; 
        let waveCtx;    

        function drawWave(frequency) {
            if (!waveCtx || !waveCanvas) return; 

            const width = waveCanvas.width;
            const height = waveCanvas.height;
            const amplitude = height / 3;
            const centerY = height / 2;
            
            waveCtx.clearRect(0, 0, width, height);
            waveCtx.beginPath();
            waveCtx.moveTo(0, centerY);

            for (let x = 0; x < width; x++) {
                const cycles = frequency / 5;
                const angle = (x / width) * Math.PI * 2 * cycles;
                const y = centerY + amplitude * Math.sin(angle);
                waveCtx.lineTo(x, y);
            }
            waveCtx.strokeStyle = 'rgb(59, 130, 246)';
            waveCtx.lineWidth = 2;
            waveCtx.stroke();
        }
        
        function setupWaveCanvas() {
            waveCanvas = document.getElementById('waveCanvas'); 
            if (waveCanvas) { 
                waveCtx = waveCanvas.getContext('2d'); 
                const container = waveCanvas.parentElement;
                waveCanvas.width = container.clientWidth;
                waveCanvas.height = container.clientHeight;
                drawWave(parseInt(frequencySlider.value));
            }
        }

        frequencySlider.addEventListener('input', (event) => {
            const freq = parseInt(event.target.value);
            frequencyValue.textContent = freq;
            drawWave(freq);
            if (freq < 7) pitchDescription.textContent = "ë‚®ì€ ìŒ (ì €ì£¼íŒŒ)";
            else if (freq < 14) pitchDescription.textContent = "ì¤‘ê°„ ìŒ";
            else pitchDescription.textContent = "ë†’ì€ ìŒ (ê³ ì£¼íŒŒ)";

            const audioFreq = 100 + (freq - 1) * 50;
            playTone(audioFreq, 0);
        });

        frequencySlider.addEventListener('mouseup', () => {
            stopTone();
        });
        frequencySlider.addEventListener('touchend', () => {
            stopTone();
        });
        frequencySlider.addEventListener('mouseleave', () => {
            stopTone();
        });
        

        const timerAnimation = document.getElementById('timerAnimation');
        let timerPulseCount = 0;
        setInterval(() => {
            timerPulseCount++;
            timerAnimation.textContent = `í„ìŠ¤ ìƒì„± ì¤‘... (${'.'.repeat(timerPulseCount % 3 + 1)})`;
        }, 500);

        const opampAnimation = document.getElementById('opampAnimation');
        let opampSignalSize = 10;
        setInterval(() => {
            opampSignalSize = opampSignalSize === 10 ? 20 : 10;
            opampAnimation.innerHTML = `ì‹ í˜¸ ì¦í­ ì¤‘... <span style="font-size:${opampSignalSize}px">ğŸ”Š</span>`;
        }, 700);


        // ê°€ë³€ì €í•­ ë…¸ë¸Œ ê´€ë ¨ ì „ì—­ ë³€ìˆ˜
        let potentiometerCanvas;
        let potentiometerCtx;
        let knobValue = 50; // Initial value
        let isDraggingKnob = false;
        let knobCenterX, knobCenterY;
        let initialMouseAngle = 0;
        let initialKnobValue = 0;

        // ë…¸ë¸Œ ê·¸ë¦¬ê¸° í•¨ìˆ˜
        function drawKnob(value) {
            if (!potentiometerCtx || !potentiometerCanvas) return;

            const size = potentiometerCanvas.width;
            knobCenterX = size / 2;
            knobCenterY = size / 2;
            const radius = size / 2 - 5; // Knob radius

            // Ensure radius is positive
            if (radius <= 0) {
                console.error("Radius is non-positive, cannot draw knob.");
                return;
            }

            potentiometerCtx.clearRect(0, 0, size, size);

            // Draw knob background
            potentiometerCtx.beginPath();
            potentiometerCtx.arc(knobCenterX, knobCenterY, radius, 0, Math.PI * 2);
            potentiometerCtx.fillStyle = '#4B5563'; // Tailwind gray-700
            potentiometerCtx.fill();
            potentiometerCtx.strokeStyle = '#374151'; // Darker gray
            potentiometerCtx.lineWidth = 2;
            potentiometerCtx.stroke();

            // Draw indicator line
            const startAngle = Math.PI * 0.75; // 135 degrees (bottom-left)
            const endAngle = Math.PI * 2.25; // 405 degrees (bottom-right, going clockwise)
            const currentAngle = startAngle + (value / 100) * (endAngle - startAngle);

            const indicatorLength = radius * 0.7;
            const indicatorX = knobCenterX + indicatorLength * Math.cos(currentAngle);
            const indicatorY = knobCenterY + indicatorLength * Math.sin(currentAngle);

            potentiometerCtx.beginPath();
            potentiometerCtx.moveTo(knobCenterX, knobCenterY);
            potentiometerCtx.lineTo(indicatorX, indicatorY);
            potentiometerCtx.strokeStyle = '#FCD34D'; // Tailwind amber-300
            potentiometerCtx.lineWidth = 3;
            potentiometerCtx.stroke();

            // Update text value
            document.getElementById('potentiometerValue').textContent = value;
        }

        // ë…¸ë¸Œ ì„¤ì • í•¨ìˆ˜
        function setupPotentiometerKnob() {
            potentiometerCanvas = document.getElementById('potentiometerCanvas');
            if (potentiometerCanvas) {
                potentiometerCtx = potentiometerCanvas.getContext('2d');
                const container = potentiometerCanvas.parentElement;
                // Ensure a minimum width to prevent negative radius
                potentiometerCanvas.width = Math.max(50, Math.min(150, container.clientWidth));
                potentiometerCanvas.height = potentiometerCanvas.width; // Keep aspect ratio
                drawKnob(knobValue); // Draw initial state

                // Mouse events
                potentiometerCanvas.addEventListener('mousedown', onKnobMouseDown);
                window.addEventListener('mousemove', onKnobMouseMove);
                window.addEventListener('mouseup', onKnobMouseUp);

                // Touch events
                potentiometerCanvas.addEventListener('touchstart', onKnobTouchStart, { passive: false });
                window.addEventListener('touchmove', onKnobTouchMove, { passive: false });
                window.addEventListener('touchend', onKnobTouchEnd);
            }
        }

        function getEventCoords(event) {
            const rect = potentiometerCanvas.getBoundingClientRect();
            let clientX, clientY;
            if (event.touches && event.touches.length > 0) {
                clientX = event.touches[0].clientX;
                clientY = event.touches[0].clientY;
            } else {
                clientX = event.clientX;
                clientY = event.clientY;
            }
            return {
                x: clientX - rect.left,
                y: clientY - rect.top
            };
        }

        function calculateAngle(x, y) {
            const dx = x - knobCenterX;
            const dy = y - knobCenterY;
            let angle = Math.atan2(dy, dx); // -PI to PI
            // Normalize angle to 0 to 2*PI
            if (angle < 0) angle += 2 * Math.PI;
            return angle;
        }

        const KNOB_ANGLE_START = Math.PI * 0.75; // 135 degrees
        const KNOB_ANGLE_END = Math.PI * 2.25;   // 405 degrees (135 + 270)
        const KNOB_ANGLE_RANGE = KNOB_ANGLE_END - KNOB_ANGLE_START; // 270 degrees (1.5 * PI)

        function onKnobMouseDown(event) {
            event.preventDefault();
            isDraggingKnob = true;
            const coords = getEventCoords(event);
            initialMouseAngle = calculateAngle(coords.x, coords.y);
            initialKnobValue = knobValue;
        }

        function onKnobMouseMove(event) {
            if (!isDraggingKnob) return;
            event.preventDefault(); // Prevent text selection/scrolling on drag

            const coords = getEventCoords(event);
            let currentMouseAngle = calculateAngle(coords.x, coords.y);

            let angleDelta = currentMouseAngle - initialMouseAngle;

            // Handle angle wrapping (e.g., going from 350 to 10 degrees)
            if (angleDelta > Math.PI) angleDelta -= Math.PI * 2;
            if (angleDelta < -Math.PI) angleDelta += Math.PI * 2;

            // Map angleDelta to value change (e.g., 270 degrees = 100 value change)
            const valueDelta = (angleDelta / KNOB_ANGLE_RANGE) * 100;
            let newValue = initialKnobValue + valueDelta;

            // Clamp value between 0 and 100
            newValue = Math.max(0, Math.min(100, newValue));
            knobValue = Math.round(newValue); // Round to integer

            drawKnob(knobValue);

            // If tact switch is on, update audio frequency
            if (isTactSwitchOn) {
                const audioFreq = 200 + (knobValue / 100) * 1000;
                if (oscillator) {
                    oscillator.frequency.setValueAtTime(audioFreq, audioContext.currentTime);
                } else {
                    playTone(audioFreq, 0); // Should not happen if tact switch is on, but as fallback
                }
            }
        }

        function onKnobMouseUp() {
            isDraggingKnob = false;
        }

        function onKnobTouchStart(event) {
            event.preventDefault();
            isDraggingKnob = true;
            const coords = getEventCoords(event);
            initialMouseAngle = calculateAngle(coords.x, coords.y);
            initialKnobValue = knobValue;
        }

        function onKnobTouchMove(event) {
            if (!isDraggingKnob) return;
            event.preventDefault(); // Prevent scrolling

            const coords = getEventCoords(event);
            let currentMouseAngle = calculateAngle(coords.x, coords.y);

            let angleDelta = currentMouseAngle - initialMouseAngle;

            if (angleDelta > Math.PI) angleDelta -= Math.PI * 2;
            if (angleDelta < -Math.PI) angleDelta += Math.PI * 2;

            const valueDelta = (angleDelta / KNOB_ANGLE_RANGE) * 100;
            let newValue = initialKnobValue + valueDelta;

            newValue = Math.max(0, Math.min(100, newValue));
            knobValue = Math.round(newValue);

            drawKnob(knobValue);

            if (isTactSwitchOn) {
                const audioFreq = 200 + (knobValue / 100) * 1000;
                if (oscillator) {
                    oscillator.frequency.setValueAtTime(audioFreq, audioContext.currentTime);
                } else {
                    playTone(audioFreq, 0);
                }
            }
        }

        function onKnobTouchEnd() {
            isDraggingKnob = false;
        }

        // Update handleTactSwitch to use knobValue
        const tactSwitchDemo = document.getElementById('tactSwitchDemo');
        const tactSwitchStatus = document.getElementById('tactSwitchStatus');
        let isTactSwitchOn = false;
        let isSpaceOrEnterPressed = false;

        function handleTactSwitch(on) {
            if (on && !isTactSwitchOn) {
                isTactSwitchOn = true;
                tactSwitchStatus.textContent = 'ìŠ¤ìœ„ì¹˜ ìƒíƒœ: ì¼œì§ (ì†Œë¦¬ ì¬ìƒ!)';
                tactSwitchDemo.classList.add('bg-red-500', 'hover:bg-red-600');
                tactSwitchDemo.classList.remove('bg-sky-500', 'hover:bg-sky-600');
                
                const audioFreq = 200 + (knobValue / 100) * 1000; // Use knobValue
                playTone(audioFreq, 0); 

            } else if (!on && isTactSwitchOn) {
                isTactSwitchOn = false;
                tactSwitchStatus.textContent = 'ìŠ¤ìœ„ì¹˜ ìƒíƒœ: êº¼ì§ (ë§ˆìš°ìŠ¤ í´ë¦­ ë˜ëŠ” ìŠ¤í˜ì´ìŠ¤ë°”/ì—”í„° í‚¤ë¡œ ì¡°ì‘)';
                tactSwitchDemo.classList.remove('bg-red-500', 'hover:bg-red-600');
                tactSwitchDemo.classList.add('bg-sky-500', 'hover:bg-sky-600');
                stopTone();
            }
        }

        // ë§ˆìš°ìŠ¤ ì´ë²¤íŠ¸ (PCìš©)
        tactSwitchDemo.addEventListener('mousedown', (event) => {
            event.preventDefault(); // ê¸°ë³¸ ë“œë˜ê·¸/ì„ íƒ ë°©ì§€
            handleTactSwitch(true);
        });
        tactSwitchDemo.addEventListener('mouseup', () => handleTactSwitch(false));
        tactSwitchDemo.addEventListener('mouseleave', () => {
            if (isTactSwitchOn) handleTactSwitch(false);
        });

        // í„°ì¹˜ ì´ë²¤íŠ¸ (ëª¨ë°”ì¼ìš©)
        tactSwitchDemo.addEventListener('touchstart', (event) => {
            event.preventDefault(); // ê¸°ë³¸ í…ìŠ¤íŠ¸ ì„ íƒ/ì¤Œ ë°©ì§€
            handleTactSwitch(true);
        }, { passive: false }); // passive: falseë¥¼ í†µí•´ preventDefault()ê°€ ì‘ë™í•˜ë„ë¡ í•¨
        tactSwitchDemo.addEventListener('touchend', () => handleTactSwitch(false));
        // touchend ì´í›„ì— touchcancelë„ ê³ ë ¤í•  ìˆ˜ ìˆì§€ë§Œ, ì—¬ê¸°ì„œëŠ” ê°„ë‹¨í•˜ê²Œ touchendë§Œ ì‚¬ìš©


        document.addEventListener('keydown', (event) => {
            if (currentActiveSectionId === 'hands' && (event.key === ' ' || event.key === 'Enter') && !isSpaceOrEnterPressed) {
                event.preventDefault();
                isSpaceOrEnterPressed = true;
                handleTactSwitch(true);
            }
        });

        document.addEventListener('keyup', (event) => {
            if (currentActiveSectionId === 'hands' && (event.key === ' ' || event.key === 'Enter') && isSpaceOrEnterPressed) {
                isSpaceOrEnterPressed = false;
                handleTactSwitch(false);
            }
        });


        const synthPitchKnob = document.getElementById('synthPitchKnob');
        const synthPitchValue = document.getElementById('synthPitchValue');
        const synthButtons = document.querySelectorAll('.synth-button');
        const synthOutputStatus = document.getElementById('synthOutputStatus');
        let synthOutputCanvas; 
        let synthCtx;    

        // ì„¹ì…˜ 4ì˜ íŒŒí˜• ì‹œê°í™” í•¨ìˆ˜
        function drawSynthWave(frequency) {
            if (!synthCtx || !synthOutputCanvas) return; 

            const width = synthOutputCanvas.width;
            const height = synthOutputCanvas.height;
            const amplitude = height / 3;
            const centerY = height / 2;
            
            synthCtx.clearRect(0, 0, width, height);
            synthCtx.beginPath();
            synthCtx.moveTo(0, centerY);

            // ì„ íƒëœ íŒŒí˜• íƒ€ì…ì— ë”°ë¼ ë‹¤ë¥¸ íŒŒí˜•ì„ ê·¸ë¦¼
            const visualCycles = frequency / 100; // ì‹œê°ì  ì£¼íŒŒìˆ˜ ìŠ¤ì¼€ì¼
            for (let x = 0; x < width; x++) {
                let y;
                const angle = (x / width) * Math.PI * 2 * visualCycles; // 0ì—ì„œ 2*PI*cyclesê¹Œì§€ ë³€í™”

                switch (selectedWaveformType) {
                    case 'sine':
                        y = centerY + amplitude * Math.sin(angle);
                        break;
                    case 'square':
                        y = centerY + amplitude * (Math.sin(angle) > 0 ? 1 : -1);
                        break;
                    case 'sawtooth':
                        y = centerY - amplitude * (angle % (2 * Math.PI) / (2 * Math.PI) * 2 - 1);
                        break;
                    case 'triangle':
                        const phase = angle % (2 * Math.PI);
                        if (phase < Math.PI) {
                            y = centerY - amplitude * (1 - (phase / Math.PI) * 2);
                        } else {
                            y = centerY - amplitude * (-1 + ((phase - Math.PI) / Math.PI) * 2);
                        }
                        break;
                    default:
                        y = centerY + amplitude * Math.sin(angle); // ê¸°ë³¸ì€ ì‚¬ì¸íŒŒ
                }
                synthCtx.lineTo(x, y);
            }
            synthCtx.strokeStyle = 'rgb(16, 185, 129)';
            synthCtx.lineWidth = 2;
            synthCtx.stroke();
        }

        function setupSynthCanvas() {
            synthOutputCanvas = document.getElementById('synthOutputCanvas'); 
            if (synthOutputCanvas) { 
                synthCtx = synthOutputCanvas.getContext('2d'); 
                const container = synthOutputCanvas.parentElement;
                synthOutputCanvas.width = container.clientWidth;
                synthOutputCanvas.height = container.clientHeight;
                drawSynthWave(0);
            }
        }

        // ìŒê³„ë³„ ì£¼íŒŒìˆ˜ ì •ì˜ (C4 ê¸°ì¤€)
        const noteFrequencies = {
            'C4': 261.63, // ë„1
            'D4': 293.66, // ë ˆ1
            'E4': 329.63, // ë¯¸1
            'F4': 349.23, // íŒŒ1
            'G4': 392.00, // ì†”1
            'A4': 440.00, // ë¼1 (ê¸°ì¤€ìŒ)
            'B4': 493.88, // ì‹œ1
            'C5': 523.25, // ë„2
            'D5': 587.33, // ë ˆ2
            'E5': 659.25, // ë¯¸2
            'F5': 698.46, // íŒŒ2
            'G5': 783.99, // ì†”2
            'A5': 880.00, // ë¼2
            'B5': 987.77  // ì‹œ2
        };

        // ìŒí‘œ ì´ë¦„ê³¼ ì˜¥íƒ€ë¸Œë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìƒ‰ìƒ í´ë˜ìŠ¤ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜
        const noteColorMap = {
            'C': 'emerald',
            'D': 'teal',
            'E': 'sky',
            'F': 'indigo',
            'G': 'purple',
            'A': 'pink',
            'B': 'red'
        };

        function getNoteColorClass(noteFull) {
            const noteName = noteFull.slice(0, -1); // ì˜ˆ: 'C' (C4ì—ì„œ)
            const octave = parseInt(noteFull.slice(-1)); // ì˜ˆ: 4 (C4ì—ì„œ)

            const baseColor = noteColorMap[noteName];
            if (!baseColor) return 'bg-gray-500'; // Fallback

            let colorVariant = '';
            if (octave === 4) {
                colorVariant = '500'; // ì²« ë²ˆì§¸ ì˜¥íƒ€ë¸Œ (C4-B4), ê¸°ë³¸ ë°ê¸°
            } else if (octave === 5) {
                colorVariant = '300'; // ë‘ ë²ˆì§¸ ì˜¥íƒ€ë¸Œ (C5-B5), ë” ë°ê²Œ
            } else {
                colorVariant = '500'; // ê¸°ë³¸ê°’
            }
            return `bg-${baseColor}-${colorVariant}`;
        }

        // ì´ˆê¸° ë¡œë“œ ì‹œ ê±´ë°˜ ìƒ‰ìƒ ì„¤ì •
        window.addEventListener('load', () => {
            synthButtons.forEach(button => {
                const noteFull = button.dataset.noteFull;
                const colorClass = getNoteColorClass(noteFull);
                button.classList.add(colorClass);
            });
            setupWaveCanvas();
            setupSynthCanvas();
            setupPotentiometerKnob(); // ê°€ë³€ì €í•­ ë…¸ë¸Œ ì´ˆê¸°í™”
            showSection('sound');
        });


        // ì„¹ì…˜ 4: ìŒë†’ì´ ì¡°ì ˆ ìŠ¬ë¼ì´ë”ì˜ input ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ìˆ˜ì •
        synthPitchKnob.addEventListener('input', (event) => {
            const pitch = parseInt(event.target.value);
            synthPitchValue.textContent = pitch;

            // í˜„ì¬ ì˜¤ì‹¤ë ˆì´í„°ê°€ í™œì„±í™”ë˜ì–´ ì†Œë¦¬ê°€ ì¬ìƒ ì¤‘ì´ë¼ë©´ ì£¼íŒŒìˆ˜ ì—…ë°ì´íŠ¸
            if (oscillator && currentPlayingBaseFreq !== 0) {
                const pitchMultiplier = 0.5 + (pitch / 100) * 1.5;
                const finalFreq = currentPlayingBaseFreq * pitchMultiplier;
                oscillator.frequency.setValueAtTime(finalFreq, audioContext.currentTime);
                
                // ìƒíƒœ í…ìŠ¤íŠ¸ ë° íŒŒí˜•ë„ ì—…ë°ì´íŠ¸
                const activeNoteButton = document.querySelector('.synth-button.ring-4');
                if (activeNoteButton) {
                    const noteFull = activeNoteButton.dataset.noteFull;
                    const noteName = noteFull.slice(0, -1);
                    const octave = parseInt(noteFull.slice(-1));
                    
                    // Hz ê¸°ë°˜ í‘œê¸°ë¥¼ ìœ„í•œ ë§¤í•‘
                    const noteTextMap = {
                        'C': 'ë„', 'D': 'ë ˆ', 'E': 'ë¯¸', 'F': 'íŒŒ', 'G': 'ì†”', 'A': 'ë¼', 'B': 'ì‹œ'
                    };
                    const displayNote = `${noteTextMap[noteName]}${octave - 3}`; // C4->ë„1, C5->ë„2
                    synthOutputStatus.textContent = `${displayNote} ìŒ (${selectedWaveformType}íŒŒ) ì¬ìƒ! (ì£¼íŒŒìˆ˜: ${finalFreq.toFixed(2)} Hz)`; // íŒŒí˜• íƒ€ì… ì¶”ê°€
                    drawSynthWave(finalFreq);
                }
            }
        });

        // íŒŒí˜• ì„ íƒ ë¼ë””ì˜¤ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        document.querySelectorAll('input[name="waveformType"]').forEach(radio => {
            radio.addEventListener('change', (event) => {
                selectedWaveformType = event.target.value;
                // ë§Œì•½ í˜„ì¬ ì†Œë¦¬ê°€ ì¬ìƒ ì¤‘ì´ë¼ë©´ íŒŒí˜• íƒ€ì… ì¦‰ì‹œ ë³€ê²½
                if (oscillator) {
                    oscillator.type = selectedWaveformType;
                    // ìƒíƒœ í…ìŠ¤íŠ¸ ë° íŒŒí˜• ì—…ë°ì´íŠ¸
                    const activeNoteButton = document.querySelector('.synth-button.ring-4');
                    if (activeNoteButton) {
                        const noteFull = activeNoteButton.dataset.noteFull;
                        const noteName = noteFull.slice(0, -1);
                        const octave = parseInt(noteFull.slice(-1));
                        const pitch = parseInt(synthPitchKnob.value);
                        const finalFreq = noteFrequencies[noteFull] * (0.5 + (pitch / 100) * 1.5);
                        
                        // Hz ê¸°ë°˜ í‘œê¸°ë¥¼ ìœ„í•œ ë§¤í•‘
                        const noteTextMap = {
                            'C': 'ë„', 'D': 'ë ˆ', 'E': 'ë¯¸', 'F': 'íŒŒ', 'G': 'ì†”', 'A': 'ë¼', 'B': 'ì‹œ'
                        };
                        const displayNote = `${noteTextMap[noteName]}${octave - 3}`; // C4->ë„1, C5->ë„2
                        synthOutputStatus.textContent = `${displayNote} ìŒ (${selectedWaveformType}íŒŒ) ì¬ìƒ! (ì£¼íŒŒìˆ˜: ${finalFreq.toFixed(2)} Hz)`; // íŒŒí˜• íƒ€ì… ì¶”ê°€
                        drawSynthWave(finalFreq);
                    }
                }
            });
        });


        synthButtons.forEach(button => {
            // ë§ˆìš°ìŠ¤ ì´ë²¤íŠ¸ (PCìš©)
            button.addEventListener('mousedown', (event) => {
                event.preventDefault(); // ê¸°ë³¸ ë“œë˜ê·¸/ì„ íƒ ë°©ì§€
                const noteFull = button.dataset.noteFull; // 'C4', 'D4' ë“±
                const pitch = parseInt(synthPitchKnob.value);
                
                let baseFreq = noteFrequencies[noteFull];
                currentPlayingBaseFreq = baseFreq; // í˜„ì¬ ì¬ìƒ ì¤‘ì¸ ìŒì˜ ê¸°ë³¸ ì£¼íŒŒìˆ˜ ì €ì¥

                const pitchMultiplier = 0.5 + (pitch / 100) * 1.5;
                const finalFreq = baseFreq * pitchMultiplier;

                const noteName = noteFull.slice(0, -1);
                const octave = parseInt(noteFull.slice(-1));
                const noteTextMap = {
                    'C': 'ë„', 'D': 'ë ˆ', 'E': 'ë¯¸', 'F': 'íŒŒ', 'G': 'ì†”', 'A': 'ë¼', 'B': 'ì‹œ'
                };
                const displayNote = `${noteTextMap[noteName]}${octave - 3}`; // C4->ë„1, C5->ë„2

                synthOutputStatus.textContent = `${displayNote} ìŒ (${selectedWaveformType}íŒŒ) ì¬ìƒ! (ì£¼íŒŒìˆ˜: ${finalFreq.toFixed(2)} Hz)`; // íŒŒí˜• íƒ€ì… ì¶”ê°€
                
                playTone(finalFreq, 0); // ë¬´í•œ ì¬ìƒ
                drawSynthWave(finalFreq); // ì†Œë¦¬ ì¬ìƒ ì‹œ íŒŒí˜• ê·¸ë¦¼
                button.classList.add('ring-4', 'ring-yellow-300');
            });
            button.addEventListener('mouseup', () => {
                synthOutputStatus.textContent = 'ëŒ€ê¸° ì¤‘...';
                drawSynthWave(0);
                button.classList.remove('ring-4', 'ring-yellow-300');
                stopTone();
                currentPlayingBaseFreq = 0; // ì¬ìƒ ë©ˆì¶”ë©´ ê¸°ë³¸ ì£¼íŒŒìˆ˜ ì´ˆê¸°í™”
            });
            button.addEventListener('mouseleave', () => {
                 // ë§ˆìš°ìŠ¤ê°€ ë²„íŠ¼ì„ ë²—ì–´ë‚¬ì„ ë•Œ, í•´ë‹¹ ë²„íŠ¼ì´ í™œì„±í™” ìƒíƒœì˜€ë‹¤ë©´ ì†Œë¦¬ ë©ˆì¶¤
                 if (button.classList.contains('ring-4')) {
                    synthOutputStatus.textContent = 'ëŒ€ê¸° ì¤‘...';
                    drawSynthWave(0);
                    button.classList.remove('ring-4', 'ring-yellow-300');
                    stopTone();
                    currentPlayingBaseFreq = 0;
                 }
            });

            // í„°ì¹˜ ì´ë²¤íŠ¸ (ëª¨ë°”ì¼ìš©)
            button.addEventListener('touchstart', (event) => {
                event.preventDefault(); // ê¸°ë³¸ í…ìŠ¤íŠ¸ ì„ íƒ/ì¤Œ ë°©ì§€
                const noteFull = button.dataset.noteFull;
                const pitch = parseInt(synthPitchKnob.value);
                
                let baseFreq = noteFrequencies[noteFull];
                currentPlayingBaseFreq = baseFreq; // í˜„ì¬ ì¬ìƒ ì¤‘ì¸ ìŒì˜ ê¸°ë³¸ ì£¼íŒŒìˆ˜ ì €ì¥

                const pitchMultiplier = 0.5 + (pitch / 100) * 1.5;
                const finalFreq = baseFreq * pitchMultiplier;

                const noteName = noteFull.slice(0, -1);
                const octave = parseInt(noteFull.slice(-1));
                const noteTextMap = {
                    'C': 'ë„', 'D': 'ë ˆ', 'E': 'ë¯¸', 'F': 'íŒŒ', 'G': 'ì†”', 'A': 'ë¼', 'B': 'ì‹œ'
                };
                const displayNote = `${noteTextMap[noteName]}${octave - 3}`; // C4->ë„1, C5->ë„2

                synthOutputStatus.textContent = `${displayNote} ìŒ (${selectedWaveformType}íŒŒ) ì¬ìƒ! (ì£¼íŒŒìˆ˜: ${finalFreq.toFixed(2)} Hz)`; // íŒŒí˜• íƒ€ì… ì¶”ê°€
                
                playTone(finalFreq, 0);
                drawSynthWave(finalFreq);
                button.classList.add('ring-4', 'ring-yellow-300');
            }, { passive: false }); // passive: falseë¥¼ í†µí•´ preventDefault()ê°€ ì‘ë™í•˜ë„ë¡ í•¨

            button.addEventListener('touchend', () => {
                synthOutputStatus.textContent = 'ëŒ€ê¸° ì¤‘...';
                drawSynthWave(0);
                button.classList.remove('ring-4', 'ring-yellow-300');
                stopTone();
                currentPlayingBaseFreq = 0; // ì¬ìƒ ë©ˆì¶”ë©´ ê¸°ë³¸ ì£¼íŒŒìˆ˜ ì´ˆê¸°í™”
            });
        });
        
        window.addEventListener('resize', () => {
            setupWaveCanvas();
            setupSynthCanvas();
            setupPotentiometerKnob(); // Resize ì‹œ ë…¸ë¸Œë„ ë‹¤ì‹œ ê·¸ë¦¼
        });

    </script>
</body>
</html>
